openapi: 3.0.0
info:
  title: COBIS API Core Banking System
  description: 'Este es el API para COBIS Core Banking System. En esta versión de
    API se encuentran definidos los servicios de nuestro producto COBIS Ahorros, el
    cual permite gestionar todas las operaciones de cuentas de ahorros de un sistema
    financiero. Puedes conseguir mas información en nuestra sitio web: [http://www.cobiscorp.com](http://www.cobiscorp.com).'
  termsOfService: http://cobiscorp.com/terms/
  contact:
    name: COBIS Support Center
    url: http://www.cobiscorp.com/contact-us/customer-technical-support/
    email: support.center@cobiscorp.com
  license:
    name: COBIS API
    url: http://www.cobiscorp.com/licenses/LICENSE-1.0.html
  version: 1.0.0
externalDocs:
  description: 'Encuentra más información acerca de Cobiscorp en:'
  url: http://www.cobiscorp.com
servers:
- url: https://virtserver.swaggerhub.com/Cobiscorp/COBISAPICoreBanking/1.0.0
  description: SwaggerHub API Auto Mocking
- url: http://cobisapi.cobiscorp.com/lastest
  description: Main (production) server
- url: http://staging-cobisapi.cobiscorp.com
  description: Internal staging server for testing
tags:
- name: customer
  description: Operaciones sobre clientes
  externalDocs:
    description: Encuentre más información en
    url: http://www.cobiscorp.com/products/customers
- name: saving
  description: Operaciones sobre cuentas de ahorros
  externalDocs:
    description: Encuentre más información en
    url: http://www.cobiscorp.com/products/savings
paths:
  /customers/{idType}/{idNumber}/basic-info:
    get:
      tags:
      - customer
      summary: Consulta la información básica de un cliente
      description: Retorna la información básica de un cliente por el tipo y número de identificación
      operationId: GetBasicInfoById
      parameters:
      - name: X-Authorization
        in: header
        description: JSON Web Token (JWT) entregado al usuario en la autenticación
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: X-Request-ID
        in: header
        description: Identificación única de la solicitud o petición
        required: true
        style: simple
        explode: false
        schema:
          $ref: '#/components/schemas/RequestID'
      - name: X-EndUser-Login
        in: header
        description: Login de usuario en la aplicación de front-end que realiza la petición
        required: false
        style: simple
        explode: false
        schema:
          type: string
          format: date-time
      - name: X-EndUser-RequestDateTime
        in: header
        description: Fecha y hora en la que se originó la solicitud o petición por el usuario en la aplicación de front-end
        required: false
        style: simple
        explode: false
        schema:
          type: string
          format: date-time
      - name: X-Channel
        in: header
        description: Canal desde el cual se origina la solicitud
        required: false
        style: simple
        explode: false
        schema:
          $ref: '#/components/schemas/Channel'
      - name: idType
        in: path
        description: Tipo de identificación del cliente
        required: true
        style: simple
        explode: false
        schema:
          $ref: '#/components/schemas/IdentificationType'
      - name: idNumber
        in: path
        description: Número de identificación del cliente
        required: true
        style: simple
        explode: false
        schema:
          $ref: '#/components/schemas/IdentificationNumber'
      responses:
        200:
          description: Información básica del cliente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'
        401:
          description: No se encuentra autorizado para ejecutar la operación.
          headers:
            X-Correlation-ID:
              style: simple
              explode: false
              schema:
                $ref: '#/components/parameters/X-Correlation-ID'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        404:
          description: El objeto no fue encontrado.
          headers:
            X-Correlation-ID:
              style: simple
              explode: false
              schema:
                $ref: '#/components/parameters/X-Correlation-ID'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        405:
          description: El mensaje de solicitud no se encuentra debidamente formateado.
          headers:
            X-Correlation-ID:
              style: simple
              explode: false
              schema:
                $ref: '#/components/parameters/X-Correlation-ID'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        500:
          description: 'Se presentó un error durante el procesamiento de la solicitud.''
            headers: X-Correlation-ID: schema: $ref: '
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
  /customers/{idType}/{idNumber}/financial-info:
    get:
      tags:
      - customer
      summary: Consulta la información financiera de un cliente
      description: Retorna la información financiera de un cliente por el tipo y número de identificación
      operationId: GetFinancialInfoById
      parameters:
      - name: X-Authorization
        in: header
        description: JSON Web Token (JWT) entregado al usuario en la autenticación
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: X-Request-ID
        in: header
        description: Identificación única de la solicitud o petición
        required: true
        style: simple
        explode: false
        schema:
          $ref: '#/components/schemas/RequestID'
      - name: X-EndUser-Login
        in: header
        description: Login de usuario en la aplicación de front-end que realiza la petición
        required: false
        style: simple
        explode: false
        schema:
          type: string
          format: date-time
      - name: X-EndUser-RequestDateTime
        in: header
        description: Fecha y hora en la que se originó la solicitud o petición por el usuario en la aplicación de front-end
        required: false
        style: simple
        explode: false
        schema:
          type: string
          format: date-time
      - name: X-Channel
        in: header
        description: Canal desde el cual se origina la solicitud
        required: false
        style: simple
        explode: false
        schema:
          $ref: '#/components/schemas/Channel'
      - name: idType
        in: path
        description: Tipo de identificación del cliente
        required: true
        style: simple
        explode: false
        schema:
          $ref: '#/components/schemas/IdentificationType'
      - name: idNumber
        in: path
        description: Número de identificación del cliente
        required: true
        style: simple
        explode: false
        schema:
          $ref: '#/components/schemas/IdentificationNumber'
      responses:
        200:
          description: Información financiera del cliente
          headers:
            X-Correlation-ID:
              style: simple
              explode: false
              schema:
                $ref: '#/components/parameters/X-Correlation-ID'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'
        401:
          description: No se encuentra autorizado para ejecutar la operación.
          headers:
            X-Correlation-ID:
              style: simple
              explode: false
              schema:
                $ref: '#/components/parameters/X-Correlation-ID'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        404:
          description: El objeto no fue encontrado.
          headers:
            X-Correlation-ID:
              style: simple
              explode: false
              schema:
                $ref: '#/components/parameters/X-Correlation-ID'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        405:
          description: El mensaje de solicitud no se encuentra debidamente formateado.
          headers:
            X-Correlation-ID:
              style: simple
              explode: false
              schema:
                $ref: '#/components/parameters/X-Correlation-ID'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        500:
          description: 'Se presentó un error durante el procesamiento de la solicitud.''
            headers: X-Correlation-ID: schema: $ref: '
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
  /savings-accounts/{number}:
    get:
      tags:
      - saving
      summary: Consulta una cuenta de ahorros por el número de cuenta
      description: Retorna la información de la cuenta de ahorros.
      operationId: GetSavingsAccountByNumber
      parameters:
      - name: X-Authorization
        in: header
        description: JSON Web Token (JWT) entregado al usuario en la autenticación
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: X-Request-ID
        in: header
        description: Identificación única de la solicitud o petición
        required: true
        style: simple
        explode: false
        schema:
          $ref: '#/components/schemas/RequestID'
      - name: X-EndUser-Login
        in: header
        description: Login de usuario en la aplicación de front-end que realiza la petición
        required: false
        style: simple
        explode: false
        schema:
          type: string
          format: date-time
      - name: X-EndUser-RequestDateTime
        in: header
        description: Fecha y hora en la que se originó la solicitud o petición por el usuario en la aplicación de front-end
        required: false
        style: simple
        explode: false
        schema:
          type: string
          format: date-time
      - name: X-Channel
        in: header
        description: Canal desde el cual se origina la solicitud
        required: false
        style: simple
        explode: false
        schema:
          $ref: '#/components/schemas/Channel'
      - name: number
        in: path
        description: Número de cuenta de ahorros a consultar
        required: true
        style: simple
        explode: false
        schema:
          $ref: '#/components/schemas/SavingsAccountNumber'
      responses:
        200:
          description: Información de la cuenta de ahorros
          headers:
            X-Correlation-ID:
              style: simple
              explode: false
              schema:
                $ref: '#/components/parameters/X-Correlation-ID'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SavingsAccount'
        401:
          description: No se encuentra autorizado para ejecutar la operación.
          headers:
            X-Correlation-ID:
              style: simple
              explode: false
              schema:
                $ref: '#/components/parameters/X-Correlation-ID'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        404:
          description: El objeto no fue encontrado.
          headers:
            X-Correlation-ID:
              style: simple
              explode: false
              schema:
                $ref: '#/components/parameters/X-Correlation-ID'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        405:
          description: El mensaje de solicitud no se encuentra debidamente formateado.
          headers:
            X-Correlation-ID:
              style: simple
              explode: false
              schema:
                $ref: '#/components/parameters/X-Correlation-ID'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        500:
          description: 'Se presentó un error durante el procesamiento de la solicitud.''
            headers: X-Correlation-ID: schema: $ref: '
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
  /savings-accounts/{number}/deposit:
    post:
      tags:
      - saving
      summary: Realiza un depósito a una cuenta de ahorros en efectivo
      description: Realiza un depósito en efectivo al número de cuenta de ahorros determinada
      operationId: CreateCashDepositToSavingsAccount
      parameters:
      - name: X-Authorization
        in: header
        description: JSON Web Token (JWT) entregado al usuario en la autenticación
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: X-Request-ID
        in: header
        description: Identificación única de la solicitud o petición
        required: true
        style: simple
        explode: false
        schema:
          $ref: '#/components/schemas/RequestID'
      - name: X-EndUser-Login
        in: header
        description: Login de usuario en la aplicación de front-end que realiza la petición
        required: false
        style: simple
        explode: false
        schema:
          type: string
          format: date-time
      - name: X-EndUser-RequestDateTime
        in: header
        description: Fecha y hora en la que se originó la solicitud o petición por el usuario en la aplicación de front-end
        required: false
        style: simple
        explode: false
        schema:
          type: string
          format: date-time
      - name: X-Channel
        in: header
        description: Canal desde el cual se origina la solicitud
        required: false
        style: simple
        explode: false
        schema:
          $ref: '#/components/schemas/Channel'
      - name: number
        in: path
        description: Número de cuenta a la cual se realiza el depósito
        required: true
        style: simple
        explode: false
        schema:
          $ref: '#/components/schemas/SavingsAccountNumber'
      requestBody:
        $ref: '#/components/requestBodies/DepositSavingsAccount'
      responses:
        201:
          description: El depósito ha sido realizado exitosamente.
          headers:
            X-Correlation-ID:
              style: simple
              explode: false
              schema:
                $ref: '#/components/parameters/X-Correlation-ID'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SavingsAccount'
        401:
          description: No se encuentra autorizado para ejecutar la operación.
          headers:
            X-Correlation-ID:
              style: simple
              explode: false
              schema:
                $ref: '#/components/parameters/X-Correlation-ID'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        404:
          description: El objeto no fue encontrado.
          headers:
            X-Correlation-ID:
              style: simple
              explode: false
              schema:
                $ref: '#/components/parameters/X-Correlation-ID'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        405:
          description: El mensaje de solicitud no se encuentra debidamente formateado.
          headers:
            X-Correlation-ID:
              style: simple
              explode: false
              schema:
                $ref: '#/components/parameters/X-Correlation-ID'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
        500:
          description: 'Se presentó un error durante el procesamiento de la solicitud.''
            headers: X-Correlation-ID: schema: $ref: '
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
components:
  schemas:
    SavingsAccount:
      type: object
      properties:
        code:
          maximum: 9999
          minimum: 1
          type: integer
          description: Código interno de la cuenta de ahorros
          format: int32
        number:
          $ref: '#/components/schemas/SavingsAccountNumber'
        state:
          $ref: '#/components/schemas/SavingsAccountState'
        controlCode:
          maximum: 9999
          minimum: 1
          type: integer
          description: Número secuencial de control
          format: int32
        subsidiaryCode:
          maximum: 9
          minimum: 1
          type: integer
          description: Código de la filial
          format: int32
      description: Cuenta de ahorros
    SavingsAccountState:
      type: string
      description: |
        'Estado de cuenta de ahorros'
          * A: ACTIVA
          * C: CANCELADA
          * G: INGRESADA
          * I: INACTIVA
          * N: NO PERFECCIONADA
          * T: TRASLADADA-INACTIVA
          * X: TRASLADADA-CANCELADA
      enum:
      - A
      - C
      - G
      - I
      - N
      - T
      - X
    SavingsAccountNumber:
      maxLength: 16
      minLength: 5
      type: string
      description: Número de cuena de ahorros
    Customer:
      type: object
      properties:
        code:
          maximum: 9999999999
          minimum: 1
          type: integer
          format: int32
        identification:
          $ref: '#/components/schemas/Identification'
        name:
          pattern: '[a-z0-9]{3,64}'
          type: string
        lastName:
          maxLength: 30
          minLength: 3
          type: string
        state:
          maxLength: 1
          minLength: 1
          type: string
      description: Cliente o prospecto de cliente que está interesado en adquirir un producto financiero
    City:
      type: object
      properties:
        code:
          maximum: 10
          minimum: 2
          type: string
        name:
          maxLength: 30
          minLength: 3
          type: string
        state:
          maxLength: 1
          minLength: 1
          type: string
      description: Cuidad
    Channel:
      type: integer
      description: |
        'Canal transccional'
          * 1: Oficina
          * 2: Agilizador
          * 3: Internet
          * 4: ATM
          * 5: APP Móvil
      format: int32
      enum:
      - 1
      - 2
      - 3
      - 4
      - 5
    Identification:
      type: object
      properties:
        number:
          $ref: '#/components/schemas/IdentificationNumber'
        type:
          $ref: '#/components/schemas/IdentificationType'
        birthCity:
          $ref: '#/components/schemas/City'
        expedicionDate:
          type: string
          format: date
      description: Identificación de un cliente
    IdentificationType:
      type: string
      description: "'Tipo de identificación de una persona natural o jurídica'\n \
        \ * CC: Cédula de Ciudadania\n  * CE: Cédula de Extranjería\n  * NI: Número\
        \ de Identificación Tributaria (NIT) \n"
      enum:
      - CC
      - CE
      - NI
    IdentificationNumber:
      maxLength: 16
      minLength: 5
      type: string
      description: Número de identificación de una persona natural o jurídica
    ErrorMessage:
      type: object
      properties:
        code:
          type: integer
          format: int32
        description:
          maxLength: 30
          minLength: 3
          type: string
      description: Error retornado cuando una operación no se realiza exitosamente
    RequestID:
      type: string
      description: Identificación única de una petición o solicitud
      format: uuid
  responses:
    401Unauthorized:
      description: No se encuentra autorizado para ejecutar la operación.
      headers:
        X-Correlation-ID:
          style: simple
          explode: false
          schema:
            $ref: '#/components/parameters/X-Correlation-ID'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorMessage'
    403Forbidden:
      description: La solicitud ha sido denegada.
      headers:
        X-Correlation-ID:
          style: simple
          explode: false
          schema:
            $ref: '#/components/parameters/X-Correlation-ID'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorMessage'
    404NotFound:
      description: El objeto no fue encontrado.
      headers:
        X-Correlation-ID:
          style: simple
          explode: false
          schema:
            $ref: '#/components/parameters/X-Correlation-ID'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorMessage'
    405MethodNotAllowed:
      description: El mensaje de solicitud no se encuentra debidamente formateado.
      headers:
        X-Correlation-ID:
          style: simple
          explode: false
          schema:
            $ref: '#/components/parameters/X-Correlation-ID'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorMessage'
    500InternalServerError:
      description: 'Se presentó un error durante el procesamiento de la solicitud.''
        headers: X-Correlation-ID: schema: $ref: '
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorMessage'
    502BadGateway:
      description: Se presentó un error al procesar la respuesta de un servicio proxy requerido para la solicitud.
      headers:
        X-Correlation-ID:
          style: simple
          explode: false
          schema:
            $ref: '#/components/parameters/X-Correlation-ID'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorMessage'
    503ServiceUnavailable:
      description: El servicio no se encuentra disponible en el momento.
      headers:
        X-Correlation-ID:
          style: simple
          explode: false
          schema:
            $ref: '#/components/parameters/X-Correlation-ID'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorMessage'
    504GatewayTimeout:
      description: El servicio proxy no respondió en el tiempo para procesar la solicitud.
      headers:
        X-Correlation-ID:
          style: simple
          explode: false
          schema:
            $ref: '#/components/parameters/X-Correlation-ID'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorMessage'
  parameters:
    X-Authorization:
      name: X-Authorization
      in: header
      description: JSON Web Token (JWT) entregado al usuario en la autenticación
      required: true
      style: simple
      explode: false
      schema:
        type: string
    X-Request-ID:
      name: X-Request-ID
      in: header
      description: Identificación única de la solicitud o petición
      required: true
      style: simple
      explode: false
      schema:
        $ref: '#/components/schemas/RequestID'
    X-EndUser-Login:
      name: X-EndUser-Login
      in: header
      description: Login de usuario en la aplicación de front-end que realiza la petición
      required: false
      style: simple
      explode: false
      schema:
        type: string
        format: date-time
    X-EndUser-RequestDateTime:
      name: X-EndUser-RequestDateTime
      in: header
      description: Fecha y hora en la que se originó la solicitud o petición por el usuario en la aplicación de front-end
      required: false
      style: simple
      explode: false
      schema:
        type: string
        format: date-time
    X-Channel:
      name: X-Channel
      in: header
      description: Canal desde el cual se origina la solicitud
      required: false
      style: simple
      explode: false
      schema:
        $ref: '#/components/schemas/Channel'
    X-Correlation-ID:
      name: X-Request-ID
      in: header
      description: ID que relaciona la respuesta con la solicitud. El valor de este campo corresponde al X-Request-ID de la solicitud
      required: false
      style: simple
      explode: false
      schema:
        $ref: '#/components/schemas/RequestID'
  requestBodies:
    DepositSavingsAccount:
      description: Datos para realizar el déposito a la cuenta de ahorros
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/SavingsAccount'
      required: true
